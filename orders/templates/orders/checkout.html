{% extends 'base.html' %}
{% load static %}

{% block title %}Checkout - Dokan{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Checkout</h1>
    
    {% if messages %}
        {% for message in messages %}
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="POST" action="{% url 'orders:checkout' %}" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {% csrf_token %}
        <div>
            <h2 class="text-xl font-semibold mb-4">Shipping Information</h2>
            <input type="text" name="customer_name" placeholder="Full Name" value="{{ order.customer_name|default:'' }}" class="w-full p-2 border rounded mb-3" required>
            <input type="email" name="email" placeholder="Email" value="{{ order.email|default:'' }}" class="w-full p-2 border rounded mb-3" required>
            <input type="tel" name="phone_number" placeholder="Phone" value="{{ order.phone_number|default:'' }}" class="w-full p-2 border rounded mb-3" required>
            <textarea name="shipping_address" placeholder="Shipping Address" class="w-full p-2 border rounded mb-3" required>{{ order.shipping_address|default:'' }}</textarea>
            <input type="text" name="city" placeholder="City" class="w-full p-2 border rounded mb-3">
            <input type="text" name="zip_code" placeholder="Zip Code" class="w-full p-2 border rounded mb-3">
            <textarea name="order_note" placeholder="Order Notes (optional)" class="w-full p-2 border rounded mb-3">{{ order.order_note|default:'' }}</textarea>
        </div>
        
        <div>
            <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
            {% if is_guest and cart_items %}
                {% for item in cart_items %}
                    <div class="flex justify-between mb-2">
                        <span>{{ item.product.products_name }} x {{ item.quantity }}</span>
                        <span>${{ item.total }}</span>
                    </div>
                {% endfor %}
            {% endif %}
            <hr class="my-4">
            <div class="flex justify-between"><span>Subtotal</span><span>${{ subtotal }}</span></div>
            <div class="flex justify-between"><span>Tax</span><span>${{ tax_amount }}</span></div>
            <div class="flex justify-between"><span>Shipping</span><span>${{ shipping_cost }}</span></div>
            <div class="flex justify-between font-bold text-lg"><span>Total</span><span>${{ total }}</span></div>
            
            <h2 class="text-xl font-semibold mb-4 mt-6">Payment Method</h2>
            <select name="payment_method" class="w-full p-2 border rounded mb-3">
                <option value="cod">Cash on Delivery</option>
                <option value="card">Credit/Debit Card</option>
                <!-- Add more -->
            </select>
            
            <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700">Place Order</button>
        </div>
    </form>
</div>
{% endblock %}